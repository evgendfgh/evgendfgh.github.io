(function(){"use strict";var e={2213:function(e,l,a){var t=a(5130),u=a(6768);const n={id:"app"};function o(e,l){const a=(0,u.g2)("router-link"),t=(0,u.g2)("router-view");return(0,u.uX)(),(0,u.CE)("div",n,[(0,u.Lk)("nav",null,[(0,u.bF)(a,{to:"/sales"},{default:(0,u.k6)(()=>l[0]||(l[0]=[(0,u.eW)("Продажи",-1)])),_:1,__:[0]}),l[4]||(l[4]=(0,u.eW)(" | ",-1)),(0,u.bF)(a,{to:"/orders"},{default:(0,u.k6)(()=>l[1]||(l[1]=[(0,u.eW)("Заказы",-1)])),_:1,__:[1]}),l[5]||(l[5]=(0,u.eW)(" | ",-1)),(0,u.bF)(a,{to:"/stocks"},{default:(0,u.k6)(()=>l[2]||(l[2]=[(0,u.eW)("Склады",-1)])),_:1,__:[2]}),l[6]||(l[6]=(0,u.eW)(" | ",-1)),(0,u.bF)(a,{to:"/incomes"},{default:(0,u.k6)(()=>l[3]||(l[3]=[(0,u.eW)("Поступления",-1)])),_:1,__:[3]})]),(0,u.Lk)("main",null,[(0,u.bF)(t)])])}var r=a(1241);const s={},c=(0,r.A)(s,[["render",o]]);var v=c,i=a(1387),d=(a(8111),a(1701),a(8237),a(4232)),_=a(144),p=a(1010),k=a(9064),h={__name:"SLineChart",props:{chartData:Object,options:{type:Object,default:()=>({responsive:!0,maintainAspectRatio:!1})}},setup(e){return k.t1.register(k.ZT,k.No,k.FN,k.kc,k.PP),(l,a)=>((0,u.uX)(),(0,u.Wv)((0,_.R1)(p.N1),{data:e.chartData,options:e.options},null,8,["data","options"]))}};const L=h;var m=L;const b=["value"],g=["value"];var y={__name:"DateRangePicker",props:["dateFrom","dateTo"],setup(e){return(l,a)=>((0,u.uX)(),(0,u.CE)("div",null,[(0,u.Lk)("label",null,[a[2]||(a[2]=(0,u.eW)(" От ",-1)),(0,u.Lk)("input",{type:"date",value:e.dateFrom,onInput:a[0]||(a[0]=e=>l.$emit("update:dateFrom",e.target.value))},null,40,b)]),(0,u.Lk)("label",null,[a[3]||(a[3]=(0,u.eW)(" До ",-1)),(0,u.Lk)("input",{type:"date",value:e.dateTo,onInput:a[1]||(a[1]=e=>l.$emit("update:dateTo",e.target.value))},null,40,g)])]))}};const f=y;var C=f;const w=["disabled"],R=["disabled"];var K={__name:"Pagination",props:{page:Number,totalPages:Number},setup(e){return(l,a)=>((0,u.uX)(),(0,u.CE)("div",null,[(0,u.Lk)("button",{disabled:e.page<=1,onClick:a[0]||(a[0]=a=>l.$emit("update:page",e.page-1))},"Назад",8,w),a[2]||(a[2]=(0,u.eW)(" // ",-1)),(0,u.Lk)("span",null,"Страница "+(0,d.v_)(e.page)+" из "+(0,d.v_)(e.totalPages),1),(0,u.Lk)("button",{disabled:e.page>=e.totalPages,onClick:a[1]||(a[1]=a=>l.$emit("update:page",e.page+1))},"Вперёд",8,R)]))}};const E=K;var F=E;a(4603),a(7566),a(8721);const I="E6kUTYrYwZq2tN4QEtyzsbEBk3ie";async function O(e,l,a,t=1,u=10){const n=new URL(`/api/${e}`,"https://109.73.206.144:6969");n.searchParams.set("dateFrom",l),n.searchParams.set("dateTo",a),n.searchParams.set("page",t),n.searchParams.set("pageSize",u),n.searchParams.set("key",I);const o=await fetch(n.toString());if(!o.ok)throw new Error("Ошибка при получении данных");return o.json()}const X={key:0},D={key:1,style:{color:"red"}},T={key:2,border:"1",cellspacing:"0",cellpadding:"4",style:{"margin-top":"10px"}},N={key:3},S=500;var P={__name:"SalesView",setup(e,{expose:l}){const a=(0,_.KR)(new Date(Date.now()-6048e5).toISOString().slice(0,10)),t=(0,_.KR)((new Date).toISOString().slice(0,10)),n=(0,_.KR)(!1),o=(0,_.KR)(null),r=(0,_.KR)(""),s=(0,_.KR)([]),c=(0,_.KR)(1),v=(0,_.KR)(1),i=(0,_.KR)(1),p=(0,_.KR)(null),k=(0,_.KR)("asc"),h=(0,_.KR)(null);function L(e){return"number"===typeof e?e:Number.NEGATIVE_INFINITY}function b(){k.value="asc"===k.value?"desc":"asc",p.value=null,h.value=null}function g(){p.value="asc"===p.value?"desc":"asc",k.value=null,h.value=null}function y(){h.value="asc"===h.value?"desc":"asc",k.value=null,p.value=null}const f=(0,u.EW)(()=>{let e=[...s.value];return"asc"===k.value||"desc"===k.value?e.sort((e,l)=>{const a=L(e.nm_id),t=L(l.nm_id);return"asc"===k.value?a-t:t-a}):"asc"===p.value||"desc"===p.value?e.sort((e,l)=>{const a=L(e.finished_price),t=L(l.finished_price);return"asc"===p.value?a-t:t-a}):"asc"!==h.value&&"desc"!==h.value||e.sort((e,l)=>{const a=e.warehouse_name||"",t=l.warehouse_name||"";return"asc"===h.value?a.localeCompare(t):t.localeCompare(a)}),e}),w=(0,u.EW)(()=>Math.ceil(i.value/v.value));async function R(){n.value=!0,o.value=null;try{const e=await O("sales",a.value,t.value,c.value,v.value,S);r.value=JSON.stringify(e,null,2),s.value=Array.isArray(e.data)?e.data:[],i.value=e.meta.total||0,e.meta.per_page&&(v.value=e.meta.per_page),c.value>w.value&&w.value>0&&(c.value=w.value)}catch(e){o.value=e.message||"ошибка",s.value=[],r.value=""}finally{n.value=!1}}(0,u.wB)([a,t,c,v],R,{immediate:!0});const K=(0,_.KR)(null),E={responsive:!0,maintainAspectRatio:!1,scales:{y:{title:{display:!0,text:"For pay"}},x:{title:{display:!0,text:"Last change date"}}}};function I(){const e=f.value.reduce((e,l)=>{const a=Number(l.for_pay)||0;return e[l.last_change_date]=(e[l.last_change_date]||0)+a,e},{}),l=Object.keys(e).sort(),a=l.map(l=>e[l]);K.value={labels:l,datasets:[{label:"For pay",data:a,borderColor:"#42b983",backgroundColor:"rgba(66, 185, 131, 0.2)",fill:!0,tension:.3}]}}return(0,u.wB)(f,I,{immediate:!0}),l({sortedItems:f,chartData:K,chartOptions:E,prepareChartData:I}),(e,l)=>((0,u.uX)(),(0,u.CE)("div",null,[l[4]||(l[4]=(0,u.Lk)("h1",null,"Продажи",-1)),(0,u.Lk)("div",null,[(0,u.bF)(m,{chartData:K.value,options:E},null,8,["chartData"])]),(0,u.bF)(C,{dateFrom:a.value,"onUpdate:dateFrom":l[0]||(l[0]=e=>a.value=e),dateTo:t.value,"onUpdate:dateTo":l[1]||(l[1]=e=>t.value=e)},null,8,["dateFrom","dateTo"]),(0,u.Lk)("button",{onClick:b}," Сортировать по Nm_id: "+(0,d.v_)("asc"===k.value?"▲":"desc"===k.value?"▼":" "),1),(0,u.Lk)("button",{onClick:g}," Finished price: "+(0,d.v_)("asc"===p.value?"▲":"desc"===p.value?"▼":" "),1),(0,u.Lk)("button",{onClick:y}," По складам: "+(0,d.v_)("asc"===h.value?"▲":"desc"===h.value?"▼":" "),1),n.value?((0,u.uX)(),(0,u.CE)("p",X,"Загрузка данных...")):(0,u.Q3)("",!0),o.value?((0,u.uX)(),(0,u.CE)("p",D,"Ошибка: "+(0,d.v_)(o.value),1)):(0,u.Q3)("",!0),n.value||o.value||!f.value.length?(0,u.Q3)("",!0):((0,u.uX)(),(0,u.CE)("table",T,[l[3]||(l[3]=(0,u.Lk)("thead",null,[(0,u.Lk)("tr",null,[(0,u.Lk)("th",null,"Дата"),(0,u.Lk)("th",null,"Last change date"),(0,u.Lk)("th",null,"Total price"),(0,u.Lk)("th",null,"Finished_price"),(0,u.Lk)("th",null,"Price with disc"),(0,u.Lk)("th",null,"Spp"),(0,u.Lk)("th",null,"Discount percent"),(0,u.Lk)("th",null,"Сумма к оплате For pay"),(0,u.Lk)("th",null,"Nm id"),(0,u.Lk)("th",null,"Income id"),(0,u.Lk)("th",null,"Склад"),(0,u.Lk)("th",null,"Область"),(0,u.Lk)("th",null,"Федеральный округ"),(0,u.Lk)("th",null,"Страна"),(0,u.Lk)("th",null,"Артикул товара у поставщика"),(0,u.Lk)("th",null,"Tech size"),(0,u.Lk)("th",null,"Subject"),(0,u.Lk)("th",null,"Category"),(0,u.Lk)("th",null,"Brand"),(0,u.Lk)("th",null,"G number"),(0,u.Lk)("th",null,"Sale id"),(0,u.Lk)("th",null,"Is supply"),(0,u.Lk)("th",null,"Is realization"),(0,u.Lk)("th",null,"Штрихкод"),(0,u.Lk)("th",null,"Promo code discount"),(0,u.Lk)("th",null,"Is storno"),(0,u.Lk)("th",null,"Odid")])],-1)),(0,u.Lk)("tbody",null,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(f.value,e=>((0,u.uX)(),(0,u.CE)("tr",{key:e.sale_id||e.g_number},[(0,u.Lk)("td",null,(0,d.v_)(e.date),1),(0,u.Lk)("td",null,(0,d.v_)(e.last_change_date),1),(0,u.Lk)("td",null,(0,d.v_)(e.total_price),1),(0,u.Lk)("td",null,(0,d.v_)(e.finished_price),1),(0,u.Lk)("td",null,(0,d.v_)(e.price_with_disc),1),(0,u.Lk)("td",null,(0,d.v_)(e.spp),1),(0,u.Lk)("td",null,(0,d.v_)(e.discount_percent),1),(0,u.Lk)("td",null,(0,d.v_)(e.for_pay),1),(0,u.Lk)("td",null,(0,d.v_)(e.nm_id),1),(0,u.Lk)("td",null,(0,d.v_)(e.income_id),1),(0,u.Lk)("td",null,(0,d.v_)(e.warehouse_name),1),(0,u.Lk)("td",null,(0,d.v_)(e.region_name),1),(0,u.Lk)("td",null,(0,d.v_)(e.oblast_okrug_name),1),(0,u.Lk)("td",null,(0,d.v_)(e.country_name),1),(0,u.Lk)("td",null,(0,d.v_)(e.supplier_article),1),(0,u.Lk)("td",null,(0,d.v_)(e.tech_size),1),(0,u.Lk)("td",null,(0,d.v_)(e.subject),1),(0,u.Lk)("td",null,(0,d.v_)(e.category),1),(0,u.Lk)("td",null,(0,d.v_)(e.brand),1),(0,u.Lk)("td",null,(0,d.v_)(e.g_number),1),(0,u.Lk)("td",null,(0,d.v_)(e.sale_id),1),(0,u.Lk)("td",null,(0,d.v_)(e.is_supply),1),(0,u.Lk)("td",null,(0,d.v_)(e.is_realization),1),(0,u.Lk)("td",null,(0,d.v_)(e.barcode),1),(0,u.Lk)("td",null,(0,d.v_)(e.promo_code_discount),1),(0,u.Lk)("td",null,(0,d.v_)(e.is_storno),1),(0,u.Lk)("td",null,(0,d.v_)(e.odid),1)]))),128))])])),n.value||o.value||s.value.length?(0,u.Q3)("",!0):((0,u.uX)(),(0,u.CE)("p",N,"Данные не найдены.")),(0,u.bF)(F,{page:c.value,totalPages:w.value,"onUpdate:page":l[2]||(l[2]=e=>c.value=e)},null,8,["page","totalPages"])]))}};const j=(0,r.A)(P,[["__scopeId","data-v-1b95ab7b"]]);var x=j,A={__name:"OLineChart",props:{chartData:Object,options:{type:Object,default:()=>({responsive:!0,maintainAspectRatio:!1})}},setup(e){return k.t1.register(k.ZT,k.No,k.FN,k.kc,k.PP),(l,a)=>((0,u.uX)(),(0,u.Wv)((0,_.R1)(p.N1),{data:e.chartData,options:e.options},null,8,["data","options"]))}};const W=A;var Q=W;const z={key:0},U={key:1,style:{color:"red"}},B={key:2,border:"1",cellspacing:"0",cellpadding:"4",style:{"margin-top":"10px"}},q={key:3},V=500;var $={__name:"OrdersView",setup(e,{expose:l}){const a=(0,_.KR)(new Date(Date.now()-6048e5).toISOString().slice(0,10)),t=(0,_.KR)((new Date).toISOString().slice(0,10)),n=(0,_.KR)(!1),o=(0,_.KR)(null),r=(0,_.KR)(""),s=(0,_.KR)([]),c=(0,_.KR)(1),v=(0,_.KR)(1),i=(0,_.KR)(1),p=(0,_.KR)("asc"),k=(0,_.KR)(null),h=(0,_.KR)(null);function L(){k.value="asc"===k.value?"desc":"asc",p.value=null,h.value=null}function m(){p.value="asc"===p.value?"desc":"asc",k.value=null,h.value=null}function b(){h.value="asc"===h.value?"desc":"asc",k.value=null,p.value=null}const g=(0,u.EW)(()=>{let e=[...s.value];return k.value&&e.sort((e,l)=>"asc"===k.value?e.nm_id-l.nm_id:l.nm_id-e.nm_id),p.value&&e.sort((e,l)=>"asc"===p.value?e.total_price-l.total_price:l.total_price-e.total_price),h.value&&e.sort((e,l)=>"asc"===h.value?e.warehouse_name.localeCompare(l.warehouse_name):l.warehouse_name.localeCompare(e.warehouse_name)),e}),y=(0,u.EW)(()=>Math.ceil(i.value/v.value));async function f(){n.value=!0,o.value=null;try{const e=await O("orders",a.value,t.value,c.value,v.value,V);r.value=JSON.stringify(e,null,2),s.value=Array.isArray(e.data)?e.data:[],i.value=e.meta.total||0,e.meta.per_page&&(v.value=e.meta.per_page),c.value>y.value&&y.value>0&&(c.value=y.value)}catch(e){o.value=e.message||"ошибка",s.value=[],r.value=""}finally{n.value=!1}}(0,u.wB)([a,t,c,v],f,{immediate:!0});const w=(0,_.KR)(null),R={responsive:!0,maintainAspectRatio:!1,scales:{y:{title:{display:!0,text:"Total price"}},x:{title:{display:!0,text:"Last change date"}}}};function K(){const e=g.value.reduce((e,l)=>{const a=Number(l.total_price)||0;return e[l.last_change_date]=(e[l.last_change_date]||0)+a,e},{}),l=Object.keys(e).sort(),a=l.map(l=>e[l]);w.value={labels:l,datasets:[{label:"Total price",data:a,borderColor:"#42b983",backgroundColor:"rgba(66, 185, 131, 0.2)",fill:!0,tension:.3}]}}return(0,u.wB)(g,K,{immediate:!0}),l({sortedItems:g,chartData:w,chartOptions:R,prepareChartData:K}),(e,l)=>((0,u.uX)(),(0,u.CE)("div",null,[l[4]||(l[4]=(0,u.Lk)("h1",null,"Заказы",-1)),(0,u.Lk)("div",null,[(0,u.bF)(Q,{chartData:w.value,options:R},null,8,["chartData"])]),(0,u.bF)(C,{dateFrom:a.value,"onUpdate:dateFrom":l[0]||(l[0]=e=>a.value=e),dateTo:t.value,"onUpdate:dateTo":l[1]||(l[1]=e=>t.value=e)},null,8,["dateFrom","dateTo"]),(0,u.Lk)("button",{onClick:L}," Сортировать по Nm_id : "+(0,d.v_)("asc"===k.value?"▲":"▼"),1),(0,u.Lk)("button",{onClick:m}," Total price: "+(0,d.v_)("asc"===p.value?"▲":"▼"),1),(0,u.Lk)("button",{onClick:b}," по складам: "+(0,d.v_)("asc"===h.value?"▲":"▼"),1),n.value?((0,u.uX)(),(0,u.CE)("p",z,"Загрузка данных...")):(0,u.Q3)("",!0),o.value?((0,u.uX)(),(0,u.CE)("p",U,"Ошибка: "+(0,d.v_)(o.value),1)):(0,u.Q3)("",!0),n.value||o.value||!g.value.length?(0,u.Q3)("",!0):((0,u.uX)(),(0,u.CE)("table",B,[l[3]||(l[3]=(0,u.Lk)("thead",null,[(0,u.Lk)("tr",null,[(0,u.Lk)("th",null,"Дата"),(0,u.Lk)("th",null,"Last change date"),(0,u.Lk)("th",null,"Отмена заказа Is cancel"),(0,u.Lk)("th",null,"Total price"),(0,u.Lk)("th",null,"Discount percent"),(0,u.Lk)("th",null,"Nm id"),(0,u.Lk)("th",null,"Income id"),(0,u.Lk)("th",null,"Штрихкод"),(0,u.Lk)("th",null,"Склад "),(0,u.Lk)("th",null,"Область"),(0,u.Lk)("th",null,"Артикул товара у поставщика"),(0,u.Lk)("th",null,"Tech size"),(0,u.Lk)("th",null,"Subject"),(0,u.Lk)("th",null,"Category"),(0,u.Lk)("th",null,"Brand"),(0,u.Lk)("th",null,"G number"),(0,u.Lk)("th",null," Позиций в заказах odid"),(0,u.Lk)("th",null," Cancel dt")])],-1)),(0,u.Lk)("tbody",null,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(g.value,e=>((0,u.uX)(),(0,u.CE)("tr",{key:e.date},[(0,u.Lk)("td",null,(0,d.v_)(e.date),1),(0,u.Lk)("td",null,(0,d.v_)(e.last_change_date),1),(0,u.Lk)("td",null,(0,d.v_)(e.is_cancel),1),(0,u.Lk)("td",null,(0,d.v_)(e.total_price),1),(0,u.Lk)("td",null,(0,d.v_)(e.discount_percent),1),(0,u.Lk)("td",null,(0,d.v_)(e.nm_id),1),(0,u.Lk)("td",null,(0,d.v_)(e.income_id),1),(0,u.Lk)("td",null,(0,d.v_)(e.barcode),1),(0,u.Lk)("td",null,(0,d.v_)(e.warehouse_name),1),(0,u.Lk)("td",null,(0,d.v_)(e.oblast),1),(0,u.Lk)("td",null,(0,d.v_)(e.supplier_article),1),(0,u.Lk)("td",null,(0,d.v_)(e.tech_size),1),(0,u.Lk)("td",null,(0,d.v_)(e.subject),1),(0,u.Lk)("td",null,(0,d.v_)(e.category),1),(0,u.Lk)("td",null,(0,d.v_)(e.brand),1),(0,u.Lk)("td",null,(0,d.v_)(e.g_number),1),(0,u.Lk)("td",null,(0,d.v_)(e.odid),1),(0,u.Lk)("td",null,(0,d.v_)(e.cancel_dt),1)]))),128))])])),n.value||o.value||g.value.length?(0,u.Q3)("",!0):((0,u.uX)(),(0,u.CE)("p",q,"Данные не найдены.")),(0,u.bF)(F,{page:c.value,totalPages:y.value,"onUpdate:page":l[2]||(l[2]=e=>c.value=e)},null,8,["page","totalPages"])]))}};const M=(0,r.A)($,[["__scopeId","data-v-2de9aab8"]]);var J=M,Z={__name:"ILineChart",props:{chartData:Object,options:{type:Object,default:()=>({responsive:!0,maintainAspectRatio:!1})}},setup(e){return k.t1.register(k.ZT,k.No,k.FN,k.kc,k.PP),(l,a)=>((0,u.uX)(),(0,u.Wv)((0,_.R1)(p.N1),{data:e.chartData,options:e.options},null,8,["data","options"]))}};const G=Z;var Y=G;const H={key:0},ee={key:1,style:{color:"red"}},le={key:2,border:"1",cellspacing:"0",cellpadding:"4",style:{"margin-top":"10px"}},ae={key:3},te=500;var ue={__name:"IncomesView",setup(e,{expose:l}){const a=(0,_.KR)(new Date(Date.now()-2592e6).toISOString().slice(0,10)),t=(0,_.KR)((new Date).toISOString().slice(0,10)),n=(0,_.KR)(!1),o=(0,_.KR)(null),r=(0,_.KR)(""),s=(0,_.KR)([]),c=(0,_.KR)([]),v=(0,_.KR)(1),i=(0,_.KR)(1),p=(0,_.KR)(1),k=(0,_.KR)("asc"),h=(0,_.KR)(null),L=(0,_.KR)(null);function m(){h.value="asc"===h.value?"desc":"asc",k.value=null,L.value=null}function b(){k.value="asc"===k.value?"desc":"asc",h.value=null,L.value=null}function g(){L.value="asc"===L.value?"desc":"asc",h.value=null,k.value=null}const y=(0,u.EW)(()=>{let e=[...s.value];return h.value?e.sort((e,l)=>"asc"===h.value?e.nm_id-l.nm_id:l.nm_id-e.nm_id):k.value?e.sort((e,l)=>"asc"===k.value?e.quantity-l.quantity:l.quantity-e.quantity):L.value&&e.sort((e,l)=>"asc"===L.value?e.warehouse_name.localeCompare(l.warehouse_name):l.warehouse_name.localeCompare(e.warehouse_name)),e}),f=(0,u.EW)(()=>Math.ceil(p.value/i.value));async function w(){n.value=!0,o.value=null;try{const e=await O("incomes",a.value,t.value,v.value,i.value,te);r.value=JSON.stringify(e,null,2),s.value=Array.isArray(e.data)?e.data:[],p.value=e.meta.total||0,c.value=e.meta.total,e.meta.per_page&&(i.value=e.meta.per_page),v.value>f.value&&f.value>0&&(v.value=f.value)}catch(e){o.value=e.message||"ошибка",s.value=[],r.value=""}finally{n.value=!1}}(0,u.wB)([a,t,v,i],w,{immediate:!0});const R=(0,_.KR)(null),K={responsive:!0,maintainAspectRatio:!1,scales:{y:{title:{display:!0,text:"Quantity "}},x:{title:{display:!0,text:"Дата"}}}};function E(){const e=y.value.reduce((e,l)=>{const a=l.quantity||0;return e[l.date]=(e[l.date]||0)+a,e},{}),l=Object.keys(e).sort(),a=l.map(l=>e[l]);R.value={labels:l,datasets:[{label:"Количество товаров",data:a,borderColor:"#42b983",backgroundColor:"rgba(66, 185, 131, 0.2)",fill:!0,tension:.3}]}}return(0,u.wB)(y,E,{immediate:!0}),l({sortedItems:y,chartData:R,chartOptions:K,prepareChartData:E}),(e,l)=>((0,u.uX)(),(0,u.CE)("div",null,[l[4]||(l[4]=(0,u.Lk)("h1",null,"Поступления",-1)),(0,u.Lk)("div",null,[(0,u.bF)(Y,{chartData:R.value,options:K},null,8,["chartData"])]),(0,u.bF)(C,{dateFrom:a.value,"onUpdate:dateFrom":l[0]||(l[0]=e=>a.value=e),dateTo:t.value,"onUpdate:dateTo":l[1]||(l[1]=e=>t.value=e)},null,8,["dateFrom","dateTo"]),(0,u.Lk)("button",{onClick:m}," Сортировать по Nm_id : "+(0,d.v_)("asc"===h.value?"▲":"▼"),1),(0,u.Lk)("button",{onClick:b}," Количество: "+(0,d.v_)("asc"===k.value?"▲":"▼"),1),(0,u.Lk)("button",{onClick:g}," по складам: "+(0,d.v_)("asc"===L.value?"▲":"▼"),1),n.value?((0,u.uX)(),(0,u.CE)("p",H,"Загрузка данных...")):(0,u.Q3)("",!0),o.value?((0,u.uX)(),(0,u.CE)("p",ee,"Ошибка: "+(0,d.v_)(o.value),1)):(0,u.Q3)("",!0),n.value||o.value||!y.value.length?(0,u.Q3)("",!0):((0,u.uX)(),(0,u.CE)("table",le,[l[3]||(l[3]=(0,u.Lk)("thead",null,[(0,u.Lk)("tr",null,[(0,u.Lk)("th",null,"Дата"),(0,u.Lk)("th",null,"Last change date"),(0,u.Lk)("th",null,"Date close"),(0,u.Lk)("th",null,"Nm id"),(0,u.Lk)("th",null,"Income id"),(0,u.Lk)("th",null,"Штрихкод"),(0,u.Lk)("th",null,"Количество"),(0,u.Lk)("th",null,"Склад "),(0,u.Lk)("th",null,"Артикул товара у поставщика"),(0,u.Lk)("th",null,"Tech size"),(0,u.Lk)("th",null,"Number"),(0,u.Lk)("th",null,"Total price")])],-1)),(0,u.Lk)("tbody",null,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(y.value,e=>((0,u.uX)(),(0,u.CE)("tr",{key:e.g_number},[(0,u.Lk)("td",null,(0,d.v_)(e.date),1),(0,u.Lk)("td",null,(0,d.v_)(e.last_change_date),1),(0,u.Lk)("td",null,(0,d.v_)(e.date_close),1),(0,u.Lk)("td",null,(0,d.v_)(e.nm_id),1),(0,u.Lk)("td",null,(0,d.v_)(e.income_id),1),(0,u.Lk)("td",null,(0,d.v_)(e.barcode),1),(0,u.Lk)("td",null,(0,d.v_)(e.quantity),1),(0,u.Lk)("td",null,(0,d.v_)(e.warehouse_name),1),(0,u.Lk)("td",null,(0,d.v_)(e.supplier_article),1),(0,u.Lk)("td",null,(0,d.v_)(e.tech_size),1),(0,u.Lk)("td",null,(0,d.v_)(e.number),1),(0,u.Lk)("td",null,(0,d.v_)(e.total_price),1)]))),128))])])),n.value||o.value||s.value.length?(0,u.Q3)("",!0):((0,u.uX)(),(0,u.CE)("p",ae,"Данные не найдены.")),(0,u.bF)(F,{page:v.value,totalPages:f.value,"onUpdate:page":l[2]||(l[2]=e=>v.value=e)},null,8,["page","totalPages"])]))}};const ne=(0,r.A)(ue,[["__scopeId","data-v-c89b72a4"]]);var oe=ne,re=(a(7588),{__name:"LineChart",props:{data:Object},setup(e){k.t1.register(...k.$L);const l=e,a=(0,_.KR)(null);let t=null;return(0,u.sV)(()=>{if(a.value){const e=a.value.getContext("2d");t=new k.t1(e,{type:"line",data:l.data,options:{}})}}),(0,u.wB)(()=>l.data,e=>{t&&(t.data=e,t.update())},{deep:!0}),(e,l)=>((0,u.uX)(),(0,u.CE)("canvas",{ref_key:"chartRef",ref:a},null,512))}});const se=re;var ce=se;const ve={style:{"max-width":"100%",margin:"20px 0"}},ie={key:0},de={key:1,style:{color:"red"}},_e={key:2,border:"1",cellspacing:"0",cellpadding:"4",style:{"margin-top":"10px"}},pe={key:3},ke=500;var he={__name:"StocksView",setup(e){const l=(0,_.KR)((new Date).toISOString().slice(0,10)),a=(0,_.KR)((new Date).toISOString().slice(0,10)),t=(0,_.KR)(!1),n=(0,_.KR)(null),o=(0,_.KR)(""),r=(0,_.KR)([]),s=(0,_.KR)(1),c=(0,_.KR)(1),v=(0,_.KR)(1),i=(0,_.KR)("asc"),p=(0,_.KR)(null),k=(0,_.KR)(null),h=(0,_.KR)(null),L=(0,_.KR)(null),m=(0,_.Kh)({labels:[],datasets:[{label:"In way to client",data:[],borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",fill:!1},{label:"In way from client",data:[],borderColor:"rgba(255, 99, 132, 1)",backgroundColor:"rgba(255, 99, 132, 0.2)",fill:!1}]});function b(){p.value="asc"===p.value?"desc":"asc",i.value=null,k.value=null,h.value=null,L.value=null}function g(){i.value="asc"===i.value?"desc":"asc",p.value=null,k.value=null,h.value=null,L.value=null}function y(){k.value="asc"===k.value?"desc":"asc",p.value=null,i.value=null,h.value=null,L.value=null}function f(){i.value="asc"===h.value?"desc":"asc",p.value=null,k.value=null,h.value=null,L.value=null}function w(){i.value="asc"===L.value?"desc":"asc",p.value=null,k.value=null,h.value=null,L.value=null}const R=(0,u.EW)(()=>{let e=[...r.value];return p.value&&e.sort((e,l)=>"asc"===p.value?e.nm_id-l.nm_id:l.nm_id-e.nm_id),i.value&&e.sort((e,l)=>"asc"===i.value?e.sc_code-l.sc_code:l.sc_code-e.sc_code),k.value&&e.sort((e,l)=>"asc"===k.value?e.warehouse_name.localeCompare(l.warehouse_name):l.warehouse_name.localeCompare(e.warehouse_name)),i.value&&e.sort((e,l)=>"asc"===h.value?e.last_change_date-l.last_change_date:l.last_change_date-e.last_change_date),i.value&&e.sort((e,l)=>"asc"===L.value?e.price-l.price:l.price-e.price),e}),K=(0,u.EW)(()=>Math.ceil(v.value/c.value));async function E(){t.value=!0,n.value=null;try{const e=await O("stocks",l.value,a.value,s.value,c.value,ke);o.value=JSON.stringify(e,null,2),r.value=Array.isArray(e.data)?e.data:[],v.value=e.meta.total||0,e.meta.per_page&&(c.value=e.meta.per_page),s.value>K.value&&K.value>0&&(s.value=K.value)}catch(e){n.value=e.message||"ошибка",r.value=[],o.value=""}finally{t.value=!1}}return(0,u.wB)([l,a,s,c],E,{immediate:!0}),(0,u.wB)(r,()=>{const e={};r.value.forEach(l=>{const a=l.last_change_date;e[a]||(e[a]={to:0,from:0}),e[a].to+=Number(l.in_way_to_client||0),e[a].from+=Number(l.in_way_from_client||0)});const l=Object.keys(e).sort();m.labels=l,m.datasets[0].data=l.map(l=>e[l].to),m.datasets[1].data=l.map(l=>e[l].from)},{immediate:!0}),(e,o)=>((0,u.uX)(),(0,u.CE)("div",null,[o[4]||(o[4]=(0,u.Lk)("h1",null,"Склады",-1)),(0,u.Lk)("div",ve,[(0,u.bF)(ce,{data:m},null,8,["data"])]),(0,u.bF)(C,{dateFrom:l.value,"onUpdate:dateFrom":o[0]||(o[0]=e=>l.value=e),dateTo:a.value,"onUpdate:dateTo":o[1]||(o[1]=e=>a.value=e)},null,8,["dateFrom","dateTo"]),(0,u.Lk)("button",{onClick:b}," Сортировать по Nm_id : "+(0,d.v_)("asc"===p.value?"▲":"▼"),1),(0,u.Lk)("button",{onClick:g}," Sc code: "+(0,d.v_)("asc"===i.value?"▲":"▼"),1),(0,u.Lk)("button",{onClick:y}," по складам: "+(0,d.v_)("asc"===k.value?"▲":"▼"),1),(0,u.Lk)("button",{onClick:f}," Last change date: "+(0,d.v_)("asc"===h.value?"▲":"▼"),1),(0,u.Lk)("button",{onClick:w}," Цена: "+(0,d.v_)("asc"===L.value?"▲":"▼"),1),t.value?((0,u.uX)(),(0,u.CE)("p",ie,"Загрузка данных...")):(0,u.Q3)("",!0),n.value?((0,u.uX)(),(0,u.CE)("p",de,"Ошибка: "+(0,d.v_)(n.value),1)):(0,u.Q3)("",!0),t.value||n.value||!R.value.length?(0,u.Q3)("",!0):((0,u.uX)(),(0,u.CE)("table",_e,[o[3]||(o[3]=(0,u.Lk)("thead",null,[(0,u.Lk)("tr",null,[(0,u.Lk)("th",null,"Дата"),(0,u.Lk)("th",null,"Last change date"),(0,u.Lk)("th",null,"Цена"),(0,u.Lk)("th",null,"Nm id"),(0,u.Lk)("th",null,"Штрихкод"),(0,u.Lk)("th",null,"Quantity"),(0,u.Lk)("th",null,"Quantity full"),(0,u.Lk)("th",null,"In way to client"),(0,u.Lk)("th",null,"In way from client"),(0,u.Lk)("th",null,"Склад "),(0,u.Lk)("th",null,"Артикул товара у поставщика"),(0,u.Lk)("th",null,"Tech size"),(0,u.Lk)("th",null,"Is supply"),(0,u.Lk)("th",null,"Is realization"),(0,u.Lk)("th",null,"Sc code"),(0,u.Lk)("th",null,"Subject"),(0,u.Lk)("th",null,"Category"),(0,u.Lk)("th",null,"Brand"),(0,u.Lk)("th",null,"Discount")])],-1)),(0,u.Lk)("tbody",null,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(R.value,e=>((0,u.uX)(),(0,u.CE)("tr",{key:e.g_number},[(0,u.Lk)("td",null,(0,d.v_)(e.date),1),(0,u.Lk)("td",null,(0,d.v_)(e.last_change_date),1),(0,u.Lk)("td",null,(0,d.v_)(e.price),1),(0,u.Lk)("td",null,(0,d.v_)(e.nm_id),1),(0,u.Lk)("td",null,(0,d.v_)(e.barcode),1),(0,u.Lk)("td",null,(0,d.v_)(e.quantity),1),(0,u.Lk)("td",null,(0,d.v_)(e.quantity_full),1),(0,u.Lk)("td",null,(0,d.v_)(e.in_way_to_client),1),(0,u.Lk)("td",null,(0,d.v_)(e.in_way_from_client),1),(0,u.Lk)("td",null,(0,d.v_)(e.warehouse_name),1),(0,u.Lk)("td",null,(0,d.v_)(e.supplier_article),1),(0,u.Lk)("td",null,(0,d.v_)(e.tech_size),1),(0,u.Lk)("td",null,(0,d.v_)(e.is_supply),1),(0,u.Lk)("td",null,(0,d.v_)(e.is_realization),1),(0,u.Lk)("td",null,(0,d.v_)(e.sc_code),1),(0,u.Lk)("td",null,(0,d.v_)(e.subject),1),(0,u.Lk)("td",null,(0,d.v_)(e.category),1),(0,u.Lk)("td",null,(0,d.v_)(e.brand),1),(0,u.Lk)("td",null,(0,d.v_)(e.discount),1)]))),128))])])),t.value||n.value||R.value.length?(0,u.Q3)("",!0):((0,u.uX)(),(0,u.CE)("p",pe,"Данные не найдены.")),(0,u.bF)(F,{page:s.value,totalPages:K.value,"onUpdate:page":o[2]||(o[2]=e=>s.value=e)},null,8,["page","totalPages"])]))}};const Le=(0,r.A)(he,[["__scopeId","data-v-c9b053c8"]]);var me=Le;const be=[{path:"/",redirect:"/stocks"},{path:"/sales",component:x},{path:"/orders",component:J},{path:"/stocks",component:me},{path:"/incomes",component:oe}],ge=(0,i.aE)({history:(0,i.LA)(),routes:be});var ye=ge;const fe=(0,t.Ef)(v);fe.use(ye),fe.mount("#app")}},l={};function a(t){var u=l[t];if(void 0!==u)return u.exports;var n=l[t]={exports:{}};return e[t].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(l,t,u,n){if(!t){var o=1/0;for(v=0;v<e.length;v++){t=e[v][0],u=e[v][1],n=e[v][2];for(var r=!0,s=0;s<t.length;s++)(!1&n||o>=n)&&Object.keys(a.O).every(function(e){return a.O[e](t[s])})?t.splice(s--,1):(r=!1,n<o&&(o=n));if(r){e.splice(v--,1);var c=u();void 0!==c&&(l=c)}}return l}n=n||0;for(var v=e.length;v>0&&e[v-1][2]>n;v--)e[v]=e[v-1];e[v]=[t,u,n]}}(),function(){a.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(l,{a:l}),l}}(),function(){a.d=function(e,l){for(var t in l)a.o(l,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:l[t]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){var e={524:0};a.O.j=function(l){return 0===e[l]};var l=function(l,t){var u,n,o=t[0],r=t[1],s=t[2],c=0;if(o.some(function(l){return 0!==e[l]})){for(u in r)a.o(r,u)&&(a.m[u]=r[u]);if(s)var v=s(a)}for(l&&l(t);c<o.length;c++)n=o[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(v)},t=self["webpackChunkmy_spa_app"]=self["webpackChunkmy_spa_app"]||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))}();var t=a.O(void 0,[504],function(){return a(2213)});t=a.O(t)})();
//# sourceMappingURL=app.9196c852.js.map